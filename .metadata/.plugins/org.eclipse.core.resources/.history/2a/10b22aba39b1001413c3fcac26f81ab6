PREFIX ex: <http://example.com/0.1/>

[CONSTRUCT {
  ex:s1 ex:type ex:seating .
  ex:s1 ex:seat1 "1" .
  ex:s1 ex:name1 ?n1 .
  ex:s1 ex:name2 ?n1 .
  ex:s1 ex:seat2 "1" .
  ex:context ex:switch1 "yes" .
} WHERE {
  ex:context ex:value "yes" .
  ?p1 ex:type ex:guest .
  ?p1 ex:name ?n1 .
} LIMIT 1 ]

[DELETE {
  ex:context ex:value "yes" .
  ex:context ex:switch "yes" .
} INSERT {
  ex:context ex:assign_seats "yes" .
} WHERE {
  ex:context ex:switch1 "yes" .
}]

[CONSTRUCT {
  ex:s2 ex:type ex:seating .
  ex:s2 ex:seat1 "1" .
  ex:s2 ex:name1 ?n1 .
  ex:s2 ex:name2 ?g2 .
  ex:s2 ex:seat2 "2" .
  ex:context ex:switch2 "yes" .
} WHERE {
  ex:context ex:assign_seats "yes" .
  ?seating1 ex:type ex:seating .
  ?seating1 ex:seat2 "1" .
  ?seating1 ex:name2 ?n1 .
  ?p2 ex:type ex:guest .
  ?p2 ex:name ?g2 .
} LIMIT 1 ]

[DELETE {
  ex:context ex:assign_seats "yes" .
  ex:context ex:switch2 "yes" .
} INSERT {} WHERE {
  ex:context ex:switch2 "yes" .
}]




//
[
 DELETE { ?person foaf:name "Bill" }
 INSERT { ?person foaf:name "William" }
 WHERE {
   ?person foaf:name "Bill"
 }
]   

[
 CONSTRUCT {?x foaf:duplicate ?y}
 WHERE {
   ?x foaf:name ?y .
 } LIMIT 2
]

[
 CONSTRUCT { ?p2 foaf:name "Bad" }
 WHERE {
   ?p1 foaf:name "William" .
   ?p2 foaf:name "Bill" 
 }
]

eventual consistency